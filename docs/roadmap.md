# Roadmap

## Этап 1 — Старт проекта *(завершён)*

- [x] Инициализировать git-репозиторий и связать с GitHub (`origin`).
- [x] Настроить инфраструктуру: `.gitignore`, менеджер пакетов `pnpm`, базовые скрипты `package.json`, ESLint/Tailwind.

## Этап 2 — Документация *(завершён)*

- [x] Подготовить краткое описание в `README.md`.
- [x] Создать подробный обзор проекта (`docs/project_overview.md`).
- [x] Описать дорожную карту (`docs/roadmap.md`).

## Этап 3 — Локальный прототип *(завершён)*

- [x] Сгенерировать приложение на Next.js 14 (App Router, TypeScript, Tailwind CSS).
- [x] Настроить Zustand для глобального состояния и React Flow для графа.
- [x] Реализовать базовую структуру UI (три панели, инвентарь, подсказки).
- [x] Создать локальное JSON-хранилище миров и персонажей (каталог `data/`).
- [x] Реализовать игровую логику: создание мира/персонажа, цикл «игрок ↔ ГМ», обновление графа и инвентаря.

## Этап 4 — Интеграция LLM *(завершён)*

- [x] Реализовать серверный маршрут `/api/session` с адаптером Gemini Pro и мок-провайдером.
- [x] Спроектировать интерфейс провайдеров (`getLLMProvider`) с возможностью подключения OpenAI/Anthropic.
- [x] Настроить промптинг и обработку JSON-ответа: литературное `narration`, сухое `mapDescription`, генерацию новых локаций, предметов и переходов.

## Этап 5 — Полировка и подготовка к миграции *(запланировано)*


- [ ] Вынести историю путешествий в отдельный JSON-файл (связка `worldId` + `characterId`), разгрузив `data/characters.json`.
- [ ] Обновить игровой стор и API так, чтобы новые ходы добавлялись в отдельное хранилище истории (`data/sessions/session__...json`) и персонаж хранил ссылки (`lastSessionFile`, `lastSessionEntryId`).
- [ ] Подготовить расширение промпта: запоминать последнее действие игрока и отклик ГМ в локации, выставлять флаг `action` и подсказывать ГМу об этом при повторном входе.
- [ ] провести тестирование с пользователем, получить фидбек
- [ ] Улучшить UX (индикаторы, уведомления, визуальные подсказки, подсветка локаций).
- [ ] Расширить управление инвентарём и предметами (действия «использовать», «выбросить», лог предметов).
- [ ] Подготовить адаптеры и схемы для Supabase (PostgreSQL + Storage), синхронизацию в реальном времени.
- [ ] Настроить деплой на Vercel и CI/CD (GitHub Actions).
- [ ] Добавить поддержку выбора LLM на UI и хранилище ключей (после миграции на Supabase).

## Дополнительные идеи

- Поддержка нескольких пользователей и синхронизации сессий в реальном времени.
- Система достижений и сохранений сцепленных с персонажами.
- Расширенный редактор миров (ручное редактирование графа, импорт/экспорт).
- История версий локаций и архивирование сессий.


